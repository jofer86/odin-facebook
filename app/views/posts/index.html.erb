<section class="timeline">
  <div class="timeline__new-post">
    <h1>What's on your mind</h1>

    <%= form_for @post do |f| %>
      <%= hidden_field_tag :timeline %>
      Enter Title: <%= f.text_field :title %>
      Enter Post: <%= f.text_field :body %>
      <%= f.submit%>
    <% end %>
  </div>
  <% @posts.each do |post| %>
      <%= post.title %> | <%= post.body %> | <%= post.author.first_name %> | <%= post.created_at %> 
      <% if post.likers.include?(current_user) %>
          <p>Post Liked <%= link_to 'unlike', destruction_path(post.likes.where(liker_id: current_user.id).first.id), {controller: 'likes', action: 'delete'}%> </p>
      <% else %>
      <form id="new_like" action="/likes" method="post" accept-charset="UTF-8" name="like">
          <input type="hidden" name="authenticity_token" value="<%= form_authenticity_token %>">
          <input type="hidden" name="like[post_id]" value=<%= post.id %>>
          <input type="hidden" name="like[user_id]" value=<%= current_user.id %>>
          <input type="hidden" name="like[source]" value=<%= @user ? 'profile' : 'timeline' %>>        
          <input type="submit" value="Like">
      </form>  
      <% end %>  <br>
      Comments: 
    <% post.comments.each do |comment| %>
      <ul>
        <li> <%= comment.body %> | By: <%= comment.commenter.first_name %> <% if comment.commenter == current_user %>
          <%= link_to 'Delete comment', tim_com_del_path(comment.id),{controller: "comments", action: "dest"}%>
        <% end %> </li>
      </ul>
    <% end %>
    <form id="new_comment"action="/comments" method="post" accept-charset="UTF-8" name="comment">
    <input type="hidden" name="authenticity_token" value="<%= form_authenticity_token %>">
    <input type="hidden" name="comment[post_id]" value=<%= post.id %>>
    <input type="hidden" name="timeline" value="true">
    <label for="body">Comment here</label>
    <input type="text" id="body" name="comment[body]">
    <input type="submit" value="Add comment">
    </form>
      <hr>
  <% end %>
</section>